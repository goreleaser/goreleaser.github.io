
<!DOCTYPE HTML>

<html>
	<head>
		<title>HTTP Upload &middot; GoReleaser</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="author" content="GoReleaser">
		<meta name="description" content="Deliver Go binaries as fast and easily as possible">
		<meta http-equiv="content-language" content="en-us" />
		<meta name="generator" content="Hugo 0.63.2" />
		<link rel="icon" href="favicon.ico">
		<meta name="theme-color" content="#000">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="theme-color" content="black">
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:site" content="@goreleaser">
		<meta name="twitter:creator" content="@goreleaser">
		<meta name="twitter:title" content="GoReleaser">
		<meta name="twitter:description" content="Deliver Go binaries as fast and easily as possible">
		<meta name="twitter:image" content="https://goreleaser.com/card.png">
		<meta name="og:title" content="GoReleaser">
		<meta name="og:description" content="Deliver Go binaries as fast and easily as possible">
		<meta name="og:url" content="https://goreleaser.com/">
		<meta name="og:image" content="https://goreleaser.com/card.png">
		<meta property="og:type" content="website" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<link rel="stylesheet" href="https://goreleaser.com/css/index.css">
		<link rel="apple-touch-icon" href="https://goreleaser.com/apple-touch-icon.png">
		<link rel="shortcut icon" href="https://goreleaser.com/favicon.ico" type="image/x-icon">
	</head>

	<body>
		<div class="Wrapper">
			<div class="Container">
				<div class="Header">
  <a href="https://goreleaser.com/">
	<div class="Title center">
		
			<img alt="GoReleaser Logo" src="https://github.com/goreleaser.png" height="140" />
		
		<span class="text">GoReleaser</span>
		<span class="subtext"></span>
	</div>
  </a>
</div>

				<div class="Content-wrapper">
					<div class="Sidebar">
	<div class="Menu">
		<div class="item">
			<a href="https://goreleaser.com/">Home</a>
		</div>
		
			
				<div class="item">
					<a href="https://goreleaser.com/introduction/">Introduction</a>
				</div>
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/install/">Install</a>
				</div>
			
		
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/quick-start/">Quick Start</a>
				</div>
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/semver/">Semantic Versioning</a>
				</div>
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/cgo/">CGO</a>
				</div>
			
		
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/environment/">Environment</a>
				</div>
			
		
			
		
			
		
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/customization/">Customization</a>
				</div>
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/ci/">Continuous Integration</a>
				</div>
			
		
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/actions/">GitHub Actions</a>
				</div>
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/deprecations/">Deprecation notices</a>
				</div>
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/sponsors/">Sponsors</a>
				</div>
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/contributing/">Contributing</a>
				</div>
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/tutorials/">Tutorials and posts</a>
				</div>
			
		
			
				<div class="item">
					<a href="https://goreleaser.com/links/">Links</a>
				</div>
			
		
			
		
			
		
			
		
	</div>
</div>

					<div class="Content">
						
	<div class="Page" id="">
		<h1>HTTP Upload</h1>
		<p>GoReleaser supports building and pushing artifacts to HTTP servers using simple
HTTP requests.</p>
<h2 id="how-it-works">How it works</h2>
<p>You can declare multiple <code>uploads</code> instances. All binaries generated by your
<code>builds</code> section will be pushed to each configured upload.</p>
<p>If you have only one <code>uploads</code> instance, the configuration is as easy as adding
the upload target and a username to your <code>.goreleaser.yml</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#ff79c6">uploads</span>:
  - <span style="color:#ff79c6">name</span>: production
    <span style="color:#ff79c6">target</span>: http://some.server/some/path/example-repo-local/{{ .ProjectName }}/{{ .Version }}/
    <span style="color:#ff79c6">username</span>: goreleaser
</code></pre></div><p>Prerequisites:</p>
<ul>
<li>An HTTP server accepting HTTP requests</li>
<li>A user + password with grants to upload an artifact using HTTP requests (if the server requires it)</li>
</ul>
<h3 id="target">Target</h3>
<p>The <code>target</code> is the template of the URL to upload the artifacts to (<em>without</em> the name of the artifact).</p>
<p>An example configuration for <code>goreleaser</code> in upload mode <code>binary</code> with the target can look like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- <span style="color:#ff79c6">name</span>: production
  <span style="color:#ff79c6">mode</span>: binary
  <span style="color:#ff79c6">target</span>: <span style="color:#f1fa8c">&#39;http://some.server/some/path/example-repo-local/{{ .ProjectName }}/{{ .Version }}/{{ .Os }}/{{ .Arch }}{{ if .Arm }}{{ .Arm }}{{ end }}&#39;</span>
</code></pre></div><p>and will result in an HTTP PUT request sent to <code>http://some.server/some/path/example-repo-local/goreleaser/1.0.0/Darwin/x86_64/goreleaser</code>.</p>
<p>Supported variables:</p>
<ul>
<li>Version</li>
<li>Tag</li>
<li>ProjectName</li>
<li>ArtifactName</li>
<li>Os</li>
<li>Arch</li>
<li>Arm</li>
</ul>
<blockquote>
<p><strong>Warning</strong>: Variables <code>Os</code>, <code>Arch</code> and <code>Arm</code> are only supported in upload mode <code>binary</code>.</p>
</blockquote>
<p>For <code>archive</code> mode, it will also included the <code>LinuxPackage</code> type which is
generated by <code>nfpm</code> and the like.</p>
<h3 id="username">Username</h3>
<p>Your configured username needs to be valid against your HTTP server.</p>
<p>You can have the username set in the configuration file as shown above
or you can have it read from and environment variable.
The configured name of your HTTP server will be used to build the environment
variable name.
This way we support auth for multiple instances.
This also means that the <code>name</code> per configured instance needs to be unique
per GoReleaser configuration.</p>
<p>The name of the environment variable will be <code>UPLOAD_NAME_USERNAME</code>.
If your instance is named <code>production</code>, you can store the username in the
environment variable <code>UPLOAD_PRODUCTION_USERNAME</code>.
The name will be transformed to uppercase.</p>
<p>If a configured username is found in the configuration file, then the
environment variable is not used at all.</p>
<h3 id="password">Password</h3>
<p>The password will be stored in a environment variable.
The configured name of your HTTP server will be used.
This way we support auth for multiple instances.
This also means that the <code>name</code> per configured instance needs to be unique
per GoReleaser configuration.</p>
<p>The name of the environment variable will be <code>UPLOAD_NAME_SECRET</code>.
If your instance is named <code>production</code>, you need to store the secret in the
environment variable <code>UPLOAD_PRODUCTION_SECRET</code>.
The name will be transformed to uppercase.</p>
<h3 id="server-authentication">Server authentication</h3>
<p>You can authenticate your TLS server adding a trusted X.509 certificate chain
in your upload configuration.</p>
<p>The trusted certificate chain will be used to validate the server certificates.</p>
<p>You can set the trusted certificate chain using the <code>trusted_certificates</code>
setting the upload section with PEM encoded certificates on a YAML literal block
like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#ff79c6">uploads</span>:
  - <span style="color:#ff79c6">name</span>: <span style="color:#f1fa8c">&#34;some HTTP/TLS server&#34;</span>
    <span style="color:#6272a4">#...(other settings)...</span>
    <span style="color:#ff79c6">trusted_certificates</span>: <span style="color:#f1fa8c">|
</span><span style="color:#f1fa8c">     </span><span style="color:#f1fa8c"> </span><span style="color:#f1fa8c">-----BEGIN CERTIFICATE-----</span>
      MIIDrjCCApagAwIBAgIIShr2zchZo+8wDQYJKoZIhvcNAQENBQAwNTEXMBUGA1UE
      ...(edited content)...
      TyzMJasj5BPZrmKjJb6O/tOtEIJ66xPSBTxPShkEYHnB7A==
      -----END CERTIFICATE----<span style="color:#f1fa8c">-
</span><span style="color:#f1fa8c">     </span><span style="color:#f1fa8c"> </span><span style="color:#f1fa8c">-----BEGIN CERTIFICATE-----</span>
      MIIDrjCCApagAwIBAgIIShr2zchZo+8wDQYJKoZIhvcNAQENBQAwNTEXMBUGA1UE
      ...(edited content)...
      TyzMJasj5BPZrmKjJb6O/tOtEIJ66xPSBTxPShkEYHnB7A==
      -----END CERTIFICATE-----
</code></pre></div><h2 id="customization">Customization</h2>
<p>Of course, you can customize a lot of things:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#6272a4"># .goreleaser.yml</span>
<span style="color:#ff79c6">uploads</span>:
  <span style="color:#6272a4"># You can have multiple upload instances.</span>
  <span style="color:#f1fa8c">-
</span><span style="color:#f1fa8c">   </span><span style="color:#f1fa8c"> </span><span style="color:#f1fa8c"># Unique name of your upload instance. Used to identify the instance.</span>
    <span style="color:#ff79c6">name</span>: production

    <span style="color:#6272a4"># HTTP method to use.</span>
    <span style="color:#6272a4"># Default: PUT</span>
    <span style="color:#ff79c6">method</span>: POST

    <span style="color:#6272a4"># IDs of the artifacts you want to upload.</span>
    <span style="color:#ff79c6">ids</span>:
    - foo
    - bar

    <span style="color:#6272a4"># Upload mode. Valid options are `binary` and `archive`.</span>
    <span style="color:#6272a4"># If mode is `archive`, variables _Os_, _Arch_ and _Arm_ for target name are not supported.</span>
    <span style="color:#6272a4"># In that case these variables are empty.</span>
    <span style="color:#6272a4"># Default is `archive`.</span>
    <span style="color:#ff79c6">mode</span>: archive

    <span style="color:#6272a4"># Template of the URL to be used as target of the HTTP request</span>
    <span style="color:#ff79c6">target</span>: https://some.server/some/path/example-repo-local/{{ .ProjectName }}/{{ .Version }}/

    <span style="color:#6272a4"># Custom artifact name (defaults to false)</span>
    <span style="color:#6272a4"># If enable, you must supply the name of the Artifact as part of the Target</span>
    <span style="color:#6272a4"># URL as it will not be automatically append to the end of the URL, its</span>
    <span style="color:#6272a4"># pre-computed name is available as _ArtifactName_ for example</span>
    <span style="color:#6272a4"># target: https://some.server/some/path/example-repo-local/{{ .ArtifactName }};deb.distribution=xenial</span>
    <span style="color:#ff79c6">custom_artifact_name</span>: <span style="color:#ff79c6">true</span>

    <span style="color:#6272a4"># User that will be used for the deployment</span>
    <span style="color:#ff79c6">username</span>: deployuser

    <span style="color:#6272a4"># An optional header you can use to tell GoReleaser to pass the artifact&#39;s</span>
    <span style="color:#6272a4"># SHA256 checksum within the upload request.</span>
    <span style="color:#6272a4"># Default is empty.</span>
    <span style="color:#ff79c6">checksum_header</span>: -X-SHA256-Sum

    <span style="color:#6272a4"># Upload checksums (defaults to false)</span>
    <span style="color:#ff79c6">checksum</span>: <span style="color:#ff79c6">true</span>

    <span style="color:#6272a4"># Upload signatures (defaults to false)</span>
    <span style="color:#ff79c6">signature</span>: <span style="color:#ff79c6">true</span>

   <span style="color:#6272a4"># Certificate chain used to validate server certificates</span>
    <span style="color:#ff79c6">trusted_certificates</span>: <span style="color:#f1fa8c">|
</span><span style="color:#f1fa8c">     </span><span style="color:#f1fa8c"> </span><span style="color:#f1fa8c">-----BEGIN CERTIFICATE-----</span>
      MIIDrjCCApagAwIBAgIIShr2zchZo+8wDQYJKoZIhvcNAQENBQAwNTEXMBUGA1UE
      ...(edited content)...
      TyzMJasj5BPZrmKjJb6O/tOtEIJ66xPSBTxPShkEYHnB7A==
      -----END CERTIFICATE-----
</code></pre></div><p>These settings should allow you to push your artifacts into multiple HTTP servers.</p>
<blockquote>
<p>Learn more about the <a href="/templates">name template engine</a>.</p>
</blockquote>


		<blockquote>
			<p>Last updated by Carlos Alexandro Becker on March 31, 2020.
				<a href="https://github.com/goreleaser/goreleaser/edit/master/www/content/upload.md">Improve this page</a>.
			</p>
		</blockquote>
	</div>

						<div class="Footer">
	<p>Made with ❤️ by GoReleaser contributors.</p>
</div>
<script src="https://goreleaser.com/js/index.js"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-106198408-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

					</div>
				</div>
		</div>
	</body>
</html>
